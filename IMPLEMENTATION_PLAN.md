# ScholaRAG Helper - Implementation Plan

## User Feedback & Requirements

### 1. **PRISMA ≠ RAG** (They are Sequential Stages)
**Problem**: Current documentation mixes PRISMA and RAG as if they're parallel concepts.

**Reality**:
- **PRISMA (Stage 1-3)**: Systematic literature collection & filtering → Produces CSV files
- **RAG (Stage 4-6)**: Build vector DB from filtered papers → Enable Q&A system

**Solution**: Clear separation with practical workflow showing:
```
PRISMA Screening → papers_included.csv → RAG Ingestion → chroma_db/ → Research Conversation
```

### 2. **Missing Practical File Structure**
**Problem**: Users don't know what files are created, where they're saved, or how to verify PRISMA results.

**Required**: Show actual folder structure after each stage:
```
researcherRAG/
├── data/
│   ├── 01_identification/
│   │   ├── pubmed_results.csv      (450 papers)
│   │   ├── scopus_results.csv      (380 papers)
│   │   └── deduplicated.csv        (612 unique papers)
│   ├── 02_screening/
│   │   ├── title_abstract_screening.csv  (264 passed)
│   │   └── excluded_reasons.csv          (348 excluded)
│   ├── 03_full_text/
│   │   ├── full_text_assessment.csv      (142 included)
│   │   └── final_dataset.csv             (142 papers for RAG)
│   └── pdfs/                        (142 PDFs downloaded)
├── chroma_db/                       (Vector database - generated by RAG)
├── outputs/
│   ├── prisma_flowchart.png
│   └── search_log.md
└── rag_config.yaml
```

### 3. **Add Copy Buttons to All Code Blocks**
**Status**: ✅ Component created (`CodeBlock.tsx`)
**TODO**: Replace all `<pre><code>` with `<CodeBlock>`

### 4. **Visual File Structure Diagrams**
**Status**: ✅ Component created (`FileTree.tsx`)
**TODO**: Add file trees showing:
- Post-PRISMA folder structure
- RAG ingestion inputs/outputs
- Final project structure

---

## Implementation Steps

### Phase 1: Components (✅ DONE)
- [x] Create `CodeBlock.tsx` with copy functionality
- [x] Create `FileTree.tsx` for folder visualization

### Phase 2: Chapter 3 Refactor (IN PROGRESS)
**Goal**: Split into 3 clear parts

#### Part A: PRISMA Screening (Literature Collection)
```
Input:  Research question
Output: data/03_full_text/final_dataset.csv (142 papers)
        data/pdfs/ (142 PDFs)
```

#### Part B: PRISMA → RAG Bridge (Data Preparation)
```
Show practical workflow:
1. Review PRISMA results: data/02_screening/title_abstract_screening.csv
2. Download PDFs: data/pdfs/
3. Verify file structure
4. Prepare for RAG ingestion
```

#### Part C: RAG System (Q&A Interface)
```
Input:  data/pdfs/ + rag_config.yaml
Output: chroma_db/ (vector database)
Usage:  python interfaces/claude_code_interface.py
```

### Phase 3: Update All Chapters
- [ ] Chapter 1: Add CodeBlock examples
- [ ] Chapter 2: Replace inline code with CodeBlock
- [ ] Chapter 3: Add PRISMA→RAG workflow with FileTree
- [ ] Chapter 4: Update with practical file paths
- [ ] Chapter 5: Add FileTree for advanced setups
- [ ] Chapter 6: Show actual session logs with CodeBlock
- [ ] Chapter 7: Export file structures with FileTree

### Phase 4: New Documentation Pages
Consider adding:
- **Practical Walkthrough** (video-like step-by-step with screenshots)
- **File Reference** (comprehensive guide to every file/folder)
- **Troubleshooting by File** (e.g., "papers_included.csv is empty")

---

## Questions for User

1. **Chapter 3 structure**:
   - Option A: Single page with 3 parts (PRISMA | Bridge | RAG)
   - Option B: Split into 3 separate pages (3.1, 3.2, 3.3)
   - **Recommendation**: Option A for flow continuity

2. **File structure detail level**:
   - Option A: Show every single file
   - Option B: Show key files only
   - **Recommendation**: Option B with expandable details

3. **Code examples**:
   - Should we show actual CSV content (first 5 rows)?
   - Should we include validation commands? (e.g., `wc -l *.csv`)

4. **Priority**:
   - A. Copy buttons first → then content update
   - B. Content update first → then copy buttons
   - **Current plan**: A (copy buttons are quick wins)

---

## Next Immediate Actions

1. Get user confirmation on structure
2. Create example FileTree for Chapter 3
3. Write PRISMA→RAG bridge section
4. Apply CodeBlock to 1-2 chapters as example
5. Deploy for user review
